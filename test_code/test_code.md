# テストコードとは

## TDD（テスト駆動開発）

- テストコードを中心とした開発手段
- テストコードを先行して書き、それに対するロジックを書いていく
- 最初からキレイに書いていこうとすると、いざ設計をこえてコードを書くところで美意識だとか羞恥心だとかに阻まれて筆が進まなくなる。で、完成したところでも「もっとシンプルに書いていればよかったのでは？」などといった結果になる
- その反対の考えなら筆は進むが、完成に近づくに連れて「別にキレイにしなくても動くからいいんじゃない？」といったことや、納期の焦りとか、動くコードをキレイにするために手を入れるのが怖い、といったことで縛られてしまう
  - これを解消するのがTDDである

### レッドフェーズ

- そもそもロジックが書かれていないため絶対にテストが失敗する

### 次にグリーンフェーズ

- 動作するロジックを書いていく
- テストコードが動く最低レベルのコードを書いていく

### リファクタリングフェーズ

- TDDは黄金長方形である。どれかがブレるとうまく回転しなくなる
  - 具体的にはこのリファクタリングがブレやすい。外から見れば動いており中身だけいじるのはビジネス的にも賛同が得られにくく後回しにされやすい
  - しかしタンスに整理されずにしまわれている状態では目的のものを探すときに時間がかかり、そのかかった時間を先方に説明するのはコストがかかる

## そもそもなんで書くのか

- テストを基盤に考える。ソースをいじったときにテストを実行して成功するということを担保にする
- 「本来あるべき出力がこういう値になっているよ」ということを知る
