# RDS

様々なDBソフトウェアに対応したフルマネージドなリレーショナルDB

- 以下のような標準ソフトウェアを利用したDBを構築できる
  - MySQL
  - ORACLE
  - Microsoft SQL Server
  - PostgreSQL
  - MariaDB
  - Amazon Aurora
    - Amazonが作ったものでちょっと使用が違う

## AWSのDB構築

AWSにおけるDB構築はEC2に自らインストールしてDBサーバとして構築するか、専用DBサービス（RDSなど）を利用するかの2通り

- EC2に構築する場合
  - メリット: 自由にDB構成や機能を利用
  - デメリット: 構築、運用が手間
    - モニタリングなど、ユーザーが管理しなければならない
- RDSなどに構築する場合
  - メリット: 構築、管理がマネージドサービスなので楽（大部分がAWS側）
  - デメリット: AWS提供の範囲内での利用制限
    - バージョンがすべて使えるわけでもない、など。詳細下記

## RDSの制約事項

- バージョンが限定される
  - 最新バージョンはすぐに使えない
- キャパシティに上限がある
- OSへのログインができない
- ファイルシステムへのアクセスができない
- IPアドレスが固定できない
- 一部の機能が使えない
- 個別パッチは適用できない
  - ソフトウェアの会社からパッチが配布されてもそれはAWSの管理しているところである

## 特徴

- RDS自体がマネージド型の高加用なのに加え、マルチAZによるMaster、Slave構成を用意に構築することができる
  - 同期レプリケーションや自動フェイルオーバーによって信頼性や耐障害性を担保できる
- 非同期で参照専用のリードレプリカを最大5台（Auroraは15台）設置し、DBの読み取り処理をスケールアウトできる
- 自動、手動でスナップショットやトランザクションログを取得してS3に保存管理し、耐障害性を確保

## スケーリング

マネージメントコンソールやAPIからスケールアップ可能

- インスタンスタイプを変更してスケールアップ、ダウンを実施
- コマンドライン（AWS CLI）やAPIからストレージを数クリックで用意にスケールアップ、ダウンする
- 一時的にインスタンスタイプを大きくして、その後戻すことも可能
- ストレージサイズは拡張はできるが縮小はできない
