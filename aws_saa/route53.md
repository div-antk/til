# Route53

権威DNSサーバの機能をマネジメント型で簡単に利用できるサービス

- 主要機能はドメイン登録、DNSルーティング、ヘルスチェックの3つ
- ポリシーによるルーティング設定
  - トラフィックルーティング、フェイルオーバー、トラフィックフローに基づく様々な条件のルーティング設定が可能
- AWS側で100%可用性を保証するSLA（サービス品質保証）
  - 「絶対に落ちないよ」という保証
- マネージドサービスとして提供しており、ユーザー側で冗長性などを考慮する必要がない

## DNS (Domain Name Service)

DNDはインターネットにおける人向けのURLを、システム向けの住所となるIPアドレスに変換するための仕組み

- 名前解決機能があるものを**権威DNSサーバ**
- 一時的にDNS情報を企業のサーバに保持しておくことで名前解決がすぐできるようにすることに使われるものを**キャッシュDNSサーバ**

Route53はAWSが提供する権威DNSサーバで、ポート53で動作することからRoute53と呼ばれる

- **DNSレコード**というIPアドレスとURLを紐づけた表を確認してルーティングする

## 利用方法

Route53の利用を開始してドメインを登録するとホストゾーンを自動生成し、そこにルーティングを設定する

1. Route53にドメインを設定
2. ドメイン名と同じホストゾーンを自動生成
3. ホストゾーンにルーティング方法となるDNSレコードを作成
4. トラフィックルーティングを設定

## ホストゾーン

ドメイン（example.com）とそのサブドメイン（sub.example.com）のトラフィックのルーティングする方法についての情報を保持するコンテナ

### パブリックホストゾーン

- インターネット上に公開されたDNSドメインレコードを管理するコンテナ
- インターネットのDNSドメインに対するトラフィックのルーティング方法を定義

### プライベートホストゾーン

- VPCに閉じたプライベートネットワーク内のDNSドメインのレコードを管理するコンテナ
- VPC内のDNSドメインに対して、どのようにトラフィックをルーティングするかを定義
- 1つのプライベートホストゾーンで複数VPCに対応
- VPCが相互アクセス可能であれば複数リージョンのVPCでも、同じホストゾーンを利用可能

## DNSレコード

ルーティング方法を設定するためにDNSレコードを作成し、各種レコードを設定するのがDNSを使う基本になる

### SOA

- ドメインのDNSサーバ、ドメイン管理者のメールアドレス、シリアル番号などを保持して、ゾーン転送時に情報が更新されているかの判断に利用する
- トップレイヤー

### A

- ホスト名とIPアドレスの関連づけを定義するレコード
- 非常に重要なレコード

### MX

- メール用
- メールの配送先（メールサーバ）のホスト名を定義するレコード

### CNAME

- 正規ホスト名に対する別名を定義するレコード。特定のホスト名を別のドメイン名に転送するときなどに利用する
- URLを変更したりするときとか

### ALIAS (Route53固有の仮想リソースレコード)

- DNSクエリにAWSサービスのエンドポイントのIPアドレスを返答
- 以下のサービスを設定可能
  - 静的ウェブサイトとして設定されたS3バケット
  - CloudFront
  - ELB
  - ホストゾーン内のリソースレコードセット