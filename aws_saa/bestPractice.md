# AWSのベストプラクティス

11の原則を定義している

1. スケーラビリティの確保
2. 環境の自動化
3. 使い捨てリソースの使用
4. コンポーネントの疎結合
5. サーバーではなくサービス（サーバレス）
6. 最適なデータベース選択
7. 増大するデータ量対応
8. 単一障害点の排除
9. コスト最適化
10. キャッシュの利用
11. セキュリティの確保

## スケーラビリティの確保

需要の変化に対応できるアーキテクチャを設計する。  
『パフォーマンス効率』と一致するサービス

- 関連する主要サービス
  - EC2 AutoRecovery
  - EC2 AutoScaling
  - CloudWatch
  - RDS
  - DynamoDB

## 環境の自動化

システムの安定性、整合性、および組織の効率性を改善するため主要プロセスを自動化する

- 関連する主要サービス
  - CloudFormation
  - Codeシリーズ
  - ECS
    - AWS上でDockerを使えるサービス
  - ElasticBeanstalk
  - OpsWorks
  - CloudWatch

## 使い捨てリソースの使用

サーバーなどのコンポーネントを一時的なリソースとして利用、設計する

- 関連する主要サービス
  - EC2
  - AutoScaling

## コンポーネントの疎結合

コンポーネント間の相互依存を減らした構成とすることで、1つのコンポーネント変更や障害の影響を削減する

- 関連する主要サービス
  - ELB
    - ロードバランサー。システム間の直接の結合を減らす
  - SNS
    - システム間のメッセージングサービス
  - SQS
    - システム間のメッセージングサービス

## サーバーではなくサービス（サーバレス）

マネージド型サービスとサーバレスアーキテクチャにより効率的な設計と運用を実現。  
なるべく「サーバーを持つ」というところからサービスとして設計していく

- 関連する主要サービス
  - Lambda
    - これが中心
  - SNS
  - SQS
  - ELB
  - SES
  - DynamoDB
  - Amazon API Gateway
  - AmazonCongnito

## 最適なデータベース選択

ワークロードやユースケースに応じた最適なデータベース技術を利用する。  
要はいろんなデータベースサービスをうまく使っていくということ

- 関連する主要サービス
  - RedShift
    - データウェアハウス
  - RDS
    - リレーショナルデータベース
  - DynamoDB
    - NoSQLデータベース
  - Aurora
    - より高性能、高速なリレーショナルデータベース
  - Elastic search

## 増大するデータ量対応

IoT、ビッグデータなどで絶えず増加するデータの保持を効率的に実施する

- 関連する主要サービス
  - S3
  - Kinesis
    - IoTのストリーミングデータを処理する仕組み
  - Glecier

## 単一障害点の排除

AWSのサービスの多くは高可用が保証されているマネージド型サービスが多いものの、以下の主要サービスはELBなどによる高可用設計が必要

- アーキテクチャで高可用性を実現すべきサービス
  - EC2
  - DirectConnect
    - オンプレミスとつなぐ
  - RDS

- 利用する主要サービス
  - ELB

## コスト最適化

Well Architectedの『コスト最適化』と内容はダブる。  
リソースが適切なサイズから必要に応じたスケールアウト、スケールインの実施と最適な料金プランの選択

- 需要と供給の一致
  - AutoScaling

- コスト効率の高いリソース
  - EC2購入方式
  - TrustedAdvisor

- 支出の認識
  - CloudWatch
  - SNS

- 継続した最適化
  - AWS最新情報
  - TrustedAdvisor

## キャッシュの利用

繰り返し取り出すデータやコンテンツについてはキャッシュを利用する構成とする

- 関連する主要サービス
  - CloudFront
    - キャッシュを一時的に貯めていく
  - ElastiCache
    - メモリを使って高速処理をする

## セキュリティの確保

これもWell Architectedと内容がダブるところがある。  
全てのレイヤー、境界、リソース内、リソース外においてセキュリティを実装する

- データ保護
  - ELB
  - EBS
  - S3
  - RDS
  - KMS

- 権限管理
  - IAM
  - MFA

- インフラ保護
  - VPC

- 検出制御
  - CloudTrail
  - AWS Config
  - CloudWatch

## 5つの設計原則と11のベストプラクティス

### 信頼性

- スケーラビリティの確保
- 単一障害点の排除
- コンポーネントの疎結合
- 環境の自動化

### パフォーマンス効率

- スケーラビリティの確保
- キャッシュの利用
- 増大するデータ量対応
- 最適なデータベース選択
- サーバーではなくサービス
- 使い捨てリソースの使用

### 安全性

- セキュリティの確保

### コストの最適化

- コスト最適化

### 運用の優秀性

- 環境の自動化

## 改善案メモ

- AZを2つ作り（マルチAZ）、それぞれにプライベートサブネットを作る（冗長化）
- EC2にDBを作るのではなくRDSで作る
- ELBで2つのプライベートサブネットにロードバランサを設置