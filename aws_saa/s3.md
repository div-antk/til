# S3 (Simple Storage Service)

- ユーザがデータを容量制限なく保存可能なマネージド型で提供されるオブジェクト型ストレージ
- 無制限にいくらでも容量を増やせる

| 特徴            |                                  |
| ------------- | -------------------------------- |
| 高い耐久性         | 99.99999999999%（イレブンナイン）         |
| 安価なストレージ      | 容量単価: 月額1GB / 約3円                |
| スケーラブルで安定した性能 | 冗長化されて保存され、データ容量に依存しない性能がAWS側で保証 |
| 暗号化           | 転送中や保存時にデータを暗号化可能                |

| データ保存形式 |                                        |
| ------- | -------------------------------------- |
| バケット    | オブジェクトの保存場所。名前はグローバルでユニークな必要がある        |
| オブジェクト  | S3に格納されるファイルでURLが付与される。バケット内オブジェクトは無制限 |
| データサイズ  | 0KB ~ 5TB                              |


- AWSには3つのストレージサービスがある

## ブロックストレージ

- EC2にアタッチして活用するディスクサービス
- ブロック形式でデータを保存
- 高速、広帯域幅
- 例: EBS、インスタンスストア

## オブジェクトストレージ

- 安価かつ高い耐久性を持つオンラインストレージ
- オブジェクト形式でデータを保存
- 安くデータを大量に保存する場合に向いている
- 例: S3、Glacier（S3よりさらに安い）

## ファイルストレージ

- 複数のEC2インスタンスから同時にアタッチ可能な共有ストレージサービス
- ファイル形式でデータを保存
- 例: EFS

## S3のオブジェクト構成

- Key
  - オブジェクトの名前であり、バケット内のオブジェクトは一位に識別する
- Value
  - データそのものであり、バイト値で構成される
- バージョンID
  - バージョン管理に用いるID
  - 変更したり削除したりするとIDが振られる（IDを有効化してるときのみ）
  - 削除してもバージョンを残すことができる
- メタデータ
  - オブジェクトに付随する属性の情報
- サブリソース
  - バケット構成情報を保存、および管理するためのサポートを提供
  - 例: アクセス制御リスト（ACL）

## S3のデータ構成

- バケット単位で保存スペースを区分し、オブジェクトでデータを格納する
- 例↓

S3 -> バケット（website-bucket） -> オブジェクト（html、csv）  
->バケット（contents-bucket） -> オブジェクト（mp3、jpeg）

## AWSストレージサービス

- 値段や性能で最適なものを選ぶのがコツ

| タイプ                             | 特徴                                                                      | 耐久性             | 可用性    |
| ------------------------------- | ----------------------------------------------------------------------- | --------------- | ------ |
| STANDARD                        | 複数箇所にデータを複製するため耐久性が非常に高い。基本的に一番値段が高い                                    | 99.99999999999% | 99.99% |
| STANDARD-IA                     | 低頻度アクセスストレージ。スタンダードに比べて安価。データの読み出し容量に応じた課金                                           | 99.99999999999% | 99.99% |
| One Zone-IA                     | IAとの違いは、複数AZに分かれていないので可用性が落ちる。あまり重要ではないデータ向け。アクセス頻度は低いが、必要に応じてすぐに取り出すデータ向け                                           | 99.99999999999% | 99.95% |
| RRS (Reduced Redundancy Strage) | 低冗長化ストレージ。まだ使われているが非推奨されている。特に更新されていないので値段が実質高いまま。以前はGlacierから取り出したデータ配置などに使われていた                                         | 99.99%          | 99.99% |
| Amazon Glacier                  | 最安のアーカイブ用ストレージ。データ抽出にコストと時間（3~5時間）を要する。値段が圧倒的に安い（性能が低い）。中長期で使わないものの保管など。ライフサイクルマネジメントで指定。ボールロック機能でデータを保持 | 99.99999999999% | N/A    |

- S3 Intelligent-Tieringというものもある
  - 機械学習でアクセス頻度などを見て最適なストレージを選択する
